[buildout]
extends =
    https://raw.github.com/4teamwork/ftw-buildouts/master/test-plone-4.3.x.cfg
    versions.cfg
    sources.cfg
    https://raw.githubusercontent.com/4teamwork/ftw-buildouts/master/test-versions.cfg

package-name = opengever.core
package-namespace = opengever

find-links +=
    http://psc.4teamwork.ch/simple

test-egg = opengever.core[api, tests]

[test]
arguments = ['-s', '${buildout:package-namespace}', '--exit-with-status', '--auto-color', '--auto-progress', '--xml', '--package-path', '${buildout:directory}/${buildout:package-namespace}', '${buildout:package-namespace}']

eggs +=
    ${buildout:hotfix-eggs}

initialization +=
    import sys
    import os
    def _log_env(name):
        print '{}: {}'.format(name, os.environ.get(name))
    _log_env('ZSERVER_PORT')
    for i in range(1, 9):
        _log_env('PORT{}'.format(i))
    sys.exit(1)

[test-jenkins]
test-command = bin/mtest $@

[versions]
opengever.core =
ftw.testing =
